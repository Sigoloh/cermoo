const tabela = document.getElementById('gameBoard').children[0].children;

const statusDoJogador = {
  sequencia: 0,
  melhorSequencia: 0,
}

let tentativa = 0;

const set = [
"Gozar",
"etica",
"Kenga",
"Penis",
"Chuca",
"Banzo",
"Laico",
"agape",
"Dogma",
"Visse",
"Blase",
"Tenue",
"Porre",
"Praxe",
"Coito",
"Besta",
"Gambe",
"Acude",
"Moral",
"Puder",
"Massa",
"Bunda",
"Vicar",
"Fosse",
"Etnia",
"Crivo",
"Corno",
"Migue",
"Burro",
"Atras",
"Calao",
"Chula",
"Glosa",
"impar",
"Corre",
"Emana",
"Causo",
"Sanar",
"Merce",
"Pagao",
"Merda",
"Sarue",
"Treta",
"Bocal",
"Hobby",
"Fuder",
"Giria",
"Quica",
"Sonso",
"Xibiu",
"Meiga",
"Sigla",
"Troxa",
"Perua",
"Valha",
"Carma",
"Dengo",
"egide",
"Futil",
"Se pa",
"Pitel",
"Midia",
"obice",
"Bosta",
"Pifio",
"Ainda",
"Broxa",
"Aquem",
"Lauda",
"Sarro",
"Tosco",
"Porno",
"Truta",
"Fudeu",
"Pauta",
"Putas",
"Tange",
"Adeus",
"Torar",
"levar",
"amigo",
"casal",
"gozar",
"graca",
"matiz",
"visao",
"anuir",
"crivo",
"finjo",
"algum",
"devir",
"chulo",
"dubio",
"beata",
"ordem",
"certo",
"rigor",
"saida",
"sesta",
"epico",
"casta",
"leito",
"bravo",
"capaz",
"vulto",
"lamia",
"salvo",
"sulco",
"acima",
"relva",
"venia",
"mesmo",
"dorso",
"possa",
"cisao",
"valha",
"unico",
"peste",
"valor",
"fugir",
"vasto",
"coisa",
"valia",
"tecer",
"garbo",
"banal",
"puxar",
"sendo",
"docil",
"reger",
"furor",
"pobre",
"arido",
"igual",
"maior",
"breve",
"ativo",
"ouvir",
"senao",
"falso",
"selar",
"velar",
"anelo",
"casto",
"horda",
"aureo",
"fitar",
"viver",
"olhar",
"bocal",
"toada",
"pompa",
"morar",
"gerir",
"sumir",
"copia",
"voraz",
"facil",
"cabal",
"leigo",
"morte",
"tedio",
"noite",
"remir",
"mocao",
"homem",
"coeso",
"uniao",
"segue",
"prece",
"aviao",
"vimos",
"cocar",
"vendo",
"terno",
"cesta",
"tende",
"venal",
"aceso",
"peixe",
"vazio",
"claro",
"sonso",
"pardo",
"mesma",
"facam",
"motim",
"hiato",
"serie",
"pauta",
"passo",
"bando",
"virao",
"senda",
"velho",
"grave",
"opcao",
"otica",
"ancia",
"rever",
"sarue",
"imune",
"houve",
"arcar",
"havia",
"cauda",
"pecha",
"botar",
"fixar",
"posso",
"liame",
"avaro",
"flora",
"covil",
"forca",
"fenda",
"fardo",
"pouco",
"gente",
"ponto",
"jovem",
"jazia",
"quota",
"nodoa",
"caixa",
"saiba",
"vetor",
"exame",
"fosse",
"fauna",
"lugar",
"fonte",
"cioso",
"advem",
"prazo",
"vemos",
"verba",
"ardor",
"ciume",
"nicho",
"preso",
"feudo",
"otimo",
"epoca",
"junto",
"opaco",
"apoio",
"solto",
"doido",
"soldo",
"pegar",
"tendo",
"astro",
"serao",
"calma",
"cheio",
"glosa",
"orfao",
"ficar",
"apego",
"apelo",
"canso",
"lasso",
"feito",
"estao",
"fatal",
"folga",
"outro",
"asilo",
"deram",
"bater",
"crime",
"supor",
"signo",
"finda",
"plano",
"fraco",
"tirar",
"carro",
"pajem",
"sucia",
"ficha",
"reses",
"igneo",
"forem",
"navio",
"burro",
"ambas",
"parte",
"ruina",
"mudar",
"ocaso",
"massa",
"credo",
"brisa",
"atrio",
"aonde",
"nacao",
"legal",
"xeque",
"cacho",
"cover",
"campo",
"nivel",
"setor",
"ideal",
"rezar",
"plato",
"paira",
"lesse",
"optar",
"praga",
"golpe",
"bicho",
"plebe",
"torso",
"indio",
"tanto",
"praia",
"sinal",
"pasmo",
"abrir",
"fruir",
"venho",
"genio",
"icone",
"messe",
"perda",
"troca",
"agudo",
"exijo",
"aroma",
"rubro",
"lindo",
"puder",
"prado",
"reino",
"malta",
"turvo",
"afora",
"autor",
"round",
"irmao",
"zelar",
"corpo",
"supra",
"traga",
"vulgo",
"orgia",
"certa",
"impar",
"pisar",
"lidar",
"logro",
"turva",
"rival",
"sabia",
"terra",
"rouca",
"ligar",
"sarau",
"rapaz",
"farao",
"oasis",
"raiva",
"quase",
"papel",
"recem",
"alcar",
"facto",
"calda",
"limbo",
"ereto",
"elite",
"paria",
"fatuo",
"anais",
"tenso",
"estro",
"cousa",
"meiga",
"lider",
"antro",
"livro",
"retem",
"firme",
"verso",
"sitio",
"trama",
"prova",
"ciclo",
"traco",
"pagem",
"Crush",
"Orgia",
"Redir",
"Cuzao",
"Sarue",
"Laico",
"Quica",
"Sonso",
"Praxe",
"Gozar",
"Tesao",
"epico",
"Chara",
"Porra",
"Penis",
"Vadia",
"apice",
"Tenue",
"Chato",
"Fuder",
"Nigga",
"Treta",
"Blase",
"etica",
"Dogma",
"Foder",
"Chuca",
"Pifio",
"Merda",
"Migue",
"Vulgo",
"Carma",
"Putas",
"Sanar",
"Porre",
"obice",
"Hobby",
"Visse",
"Atras",
"Honra",
"Habil",
"Prego",
"Placa",
"Tosco",
"Merce",
"Parca",
"Revel",
"Cevas",
"Aquem",
"Etnia",
"Juizo",
"Legal",
"Causo",
"Emana",
"Ambos",
"Crivo",
"Pitel",
"Fosse",
"Caiba",
"Foyer",
"Viado",
"Pagao",
"agape",
"Puder",
"Sigla",
"Coito",
"Banzo",
"Casal",
"egide",
]

const palavraDoDia = set[parseInt(Math.random()*462 + 1)].toUpperCase();
console.log(palavraDoDia);

const matrizResultado = [];
let entrada = '';
function colocaLetraNaCelula(letra, i){
  const linha = tabela[tentativa];
  if(letra == 'Backspace'){
    linha.children[i - 1].innerHTML = '';
  }else{
    entrada += letra.toUpperCase();
    linha.children[i].innerHTML = letra.toUpperCase();
  }
}
function submit(entrada){
  const linha = tabela[tentativa];

  const jogada = [];

  for(let i = 0; i < entrada.length; i++){
    if(entrada[i] === palavraDoDia[i]){
      linha.children[i].style = 'background: green';
      jogada.push('&#x1F7E9');
    } else if(palavraDoDia.indexOf(entrada[i]) == -1){
      linha.children[i].style = 'background: red'; 
      jogada.push('&#x1F7E5');
    } else {
      linha.children[i].style = 'background: yellow'; 
      jogada.push('&#x1F7E8');
    }
  }

  matrizResultado.push(jogada);  

  const ganhou = entrada.toUpperCase() === palavraDoDia.toUpperCase();

  let quadro = '';

  const painelDoGanhou = document.getElementById('painel');
  if(ganhou){
    const tabela = document.getElementById('gameBoard');
    painelDoGanhou.style="display:block";
    tabela.style="display:none";
    for(let k = 0; k < matrizResultado.length; k++){
      for(let h = 0; h < matrizResultado[k].length; h++){
        quadro += `${matrizResultado[k][h]}`;
      }
      quadro += `</br>`;
    }
    painelDoGanhou.innerHTML += quadro;
  }
  if(ganhou || tentativa == 5){
    quadro = quadro.replace(/<\/br>/gm, '%0A');
    painelDoGanhou.innerHTML += `<a href="https://twitter.com/intent/tweet?text=${quadro}" class="twitter-share-button" data-text="${quadro}" data-url="http://sigolo.me" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>`
  }
  if(tentativa + 1 > 5){
    const tabela = document.getElementById('gameBoard');
    tabela.style="display:none"; 
    painelDoGanhou.style="display:block";
    painelDoGanhou.innerHTML +="<h1> VocÃª Perderu </h1>"; 
  }
  tentativa++;
}

let posicaoLetra = 0
document.addEventListener('keydown', (event) => {
  const letras = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];
  if(event.key === 'Enter'){
    submit(entrada);
    entrada = '';
    posicaoLetra = 0;
  }else if(event.key == 'Backspace'){
    colocaLetraNaCelula(event.key, posicaoLetra);
    entrada = entrada.substring(0, entrada.length - 1);
    posicaoLetra--;
  } else if(letras.indexOf(event.key) != -1){
    colocaLetraNaCelula(event.key, posicaoLetra);
    posicaoLetra++;

  }
})
